<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="memberMapper">
 <select id="login" resultType="com.kh.moving.member.model.dto.MemberDTO">
  SELECT
    	   USER_NO userNo
    	 , USER_ID userId
    	 , USER_PWD userPwd
    	 , USER_NAME userName
    	 , EMAIL
    	 , ENROLL_DATE enrollDate 
    	 , MANAGER              
       , STATUS               
    FROM 
      	 TB_MEMBER
   WHERE 
     	   USER_ID = #{userId}
  </select>
  
 <!-- 아이디 중복 체크 -->
  <select id="checkId" parameterType="string" resultType="int">
    SELECT COUNT(*) FROM TB_MEMBER WHERE USER_ID = #{userId}
  </select>
  
  <!-- 회원가입 -->
  <insert id="signup"
  		  parameterType="com.kh.moving.member.model.dto.MemberDTO">
  	INSERT 
  	  INTO 
  	  	   TB_MEMBER 
  	  	   (
	        USER_NO
	      , USER_ID
	      , USER_PWD
	      , USER_NAME
	      , BIRTHDAY
	      , EMAIL
	      , PHONE
	      , SNS_AGREE
	      , PREFERRED_GENRES
	      , ENROLL_DATE
	      , MANAGER
	      , STATUS
    		)
     VALUES 
     		(
	        SEQ_MEMBER_NO.NEXTVAL
	      , #{userId}
	      , #{userPwd}
	      , #{userName}
	      , #{birthday}
	      , #{email}
	      , #{phone}
	      , #{snsAgree}
	      , #{preferredGenres}
	      , SYSDATE
	      , DEFAULT
        , DEFAULT
)
  </insert>
  
</mapper>
